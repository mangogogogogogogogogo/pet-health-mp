<!-- ç»Ÿè®¡é¡µé¢ -->
<view class="container">
  <view class="form-group" wx:if="{{!petId}}">
    <picker mode="selector" range="{{petNames}}" value="{{petIndex}}" bindchange="onPetChange">
      <view class="picker-wrapper {{petIndex >= 0 ? '' : 'picker-empty'}}">
        <text wx:if="{{petIndex >= 0}}">{{petNames[petIndex]}}</text>
        <text wx:else>è¯·é€‰æ‹©å® ç‰©æŸ¥çœ‹ç»Ÿè®¡</text>
      </view>
    </picker>
  </view>

  <block wx:if="{{stats}}">
    <!-- å® ç‰©ä¿¡æ¯ -->
    <view class="card">
      <view style="display:flex;align-items:center;gap:20rpx;margin-bottom:24rpx;">
        <view class="pet-avatar" style="width:80rpx;height:80rpx;font-size:40rpx;">{{stats.petIcon}}</view>
        <view>
          <view class="pet-name">{{stats.petName}}</view>
          <view class="pet-meta">
            <text>{{stats.petBreed}}</text>
            <text wx:if="{{stats.petAge}}">{{stats.petAge}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æ¦‚è§ˆæ•°æ® -->
    <view class="card">
      <view class="section-title" style="font-size:30rpx;">ğŸ“Š æ¦‚è§ˆ</view>
      <view class="stat-grid">
        <view class="stat-item">
          <view class="stat-value">{{stats.totalRecords}}</view>
          <view class="stat-label">æ€»è®°å½•æ•°</view>
        </view>
        <view class="stat-item">
          <view class="stat-value">{{stats.currentWeight || '-'}}</view>
          <view class="stat-label">å½“å‰ä½“é‡(kg)</view>
        </view>
        <view class="stat-item">
          <view class="stat-value">{{stats.vaccineCount}}</view>
          <view class="stat-label">ç–«è‹—æ¬¡æ•°</view>
        </view>
        <view class="stat-item">
          <view class="stat-value">{{stats.dewormCount}}</view>
          <view class="stat-label">é©±è™«æ¬¡æ•°</view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘ç–«è‹— -->
    <view class="card" wx:if="{{stats.lastVaccine}}">
      <view class="section-title" style="font-size:30rpx;">ğŸ’‰ æœ€è¿‘ç–«è‹—</view>
      <view class="record-detail">{{stats.lastVaccine.name}} Â· {{stats.lastVaccine.date}}</view>
      <view class="record-detail" wx:if="{{stats.lastVaccine.nextDate}}">ä¸‹æ¬¡ï¼š{{stats.lastVaccine.nextDate}}</view>
    </view>

    <!-- æœ€è¿‘é©±è™« -->
    <view class="card" wx:if="{{stats.lastDeworm}}">
      <view class="section-title" style="font-size:30rpx;">ğŸ’Š æœ€è¿‘é©±è™«</view>
      <view class="record-detail">{{stats.lastDeworm.name}} Â· {{stats.lastDeworm.date}}</view>
      <view class="record-detail" wx:if="{{stats.lastDeworm.nextDate}}">ä¸‹æ¬¡ï¼š{{stats.lastDeworm.nextDate}}</view>
    </view>

    <!-- ä½“é‡è¶‹åŠ¿ -->
    <view class="card" wx:if="{{stats.weightHistory.length > 0}}">
      <view class="section-title" style="font-size:30rpx;">âš–ï¸ ä½“é‡è¶‹åŠ¿</view>
      <view class="weight-list">
        <view class="weight-row" wx:for="{{stats.weightHistory}}" wx:key="date">
          <text class="record-detail">{{item.date}}</text>
          <text style="font-weight:600;color:#6C63FF;">{{item.value}} kg</text>
        </view>
      </view>
    </view>
  </block>

  <view class="empty-state" wx:else>
    <view class="empty-icon">ğŸ“Š</view>
    <view class="empty-text">é€‰æ‹©å® ç‰©æŸ¥çœ‹ç»Ÿè®¡æ•°æ®</view>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view style="height:140rpx;"></view>
</view>
